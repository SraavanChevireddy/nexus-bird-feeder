# 🐦 Bird Feeding Project Memory

## 📝 Project Context & Knowledge Base

### 🎯 **Project Purpose**
- **Hobby project** to learn Nexus Repository management
- **Flask API** for tracking bird feeding activities
- **Educational focus** on enterprise PyPI package management patterns

### 🏗️ **Architecture Overview**
```
🐦 Bird Feeding Application
├── 📦 Package Management → Nexus Repository (bird-feeder proxy)
├── ⚙️ Configuration → Nexus Raw Repository (test-raw)
├── 🗄️ Database → Local SQLite (bird_feedings.db)
└── 🌐 API → Flask REST endpoints
```

### 🔧 **Nexus Repository Setup**
- **Nexus URL**: `http://localhost:8081`
- **Credentials**: `admin:admin123`
- **PyPI Repository**: `bird-feeder` (proxy type)
- **Config Repository**: `test-raw` (raw/hosted type)

### 📦 **Package Management**
- **Primary Source**: Nexus proxy repository
- **Fallback**: PyPI.org (configured in pip.conf)
- **Cached Packages**: flask, requests, urllib3, certifi, charset-normalizer, idna

### 🗂️ **Project Structure**
```
bird-feeding/
├── app.py                          # Main Flask API application
├── observe_logger.py               # Custom Observe.inc integration
├── requirements.txt                # Python dependencies
├── pyproject.toml                  # Modern Python project metadata
├── bird_feedings.db               # SQLite database (auto-created)
├── config/                        # Configuration files
│   ├── pip.conf                   # Nexus repository configuration
│   ├── db_config.json             # Database configuration
│   └── observe_config.json        # Observability settings
├── docs/                          # Documentation
│   ├── README.md                  # Detailed project documentation  
│   ├── TEAM_SETUP.md             # Team onboarding guide
│   └── .project-memory.md        # This knowledge base
├── scripts/                       # Utility scripts
│   ├── demo_observe.py           # Observe logging demo
│   └── setup_team.py             # Team setup automation
└── logs/                          # Application logs (runtime)
```

### 🌐 **API Endpoints**
- `GET /` - API information and documentation
- `POST /api/feedings` - Add new bird feeding record
- `GET /api/feedings` - Retrieve all feeding records
- `GET /api/stats` - Get feeding statistics

### 📊 **Database Schema**
```sql
CREATE TABLE bird_feedings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    bird_type TEXT NOT NULL,
    food_type TEXT NOT NULL,
    quantity INTEGER NOT NULL,
    location TEXT,
    feeding_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT
);
```

### 🔐 **Security & Compliance Context**
- **Standard Library vs Third-Party**: Only third-party packages (flask, requests, structlog) flow through Nexus
- **Vulnerability Scanning**: Nexus Firewall/Lifecycle can only scan packages in the repository
- **Configuration Management**: Database config stored both locally and in Nexus for team consistency
- **Observability**: Structured logging with Observe.inc integration for monitoring and debugging

### 🔍 **Observability & Monitoring**
- **Structured Logging**: JSON-formatted logs with request tracking
- **Request Tracing**: Each request gets unique ID for correlation
- **Business Events**: Custom events for bird feeding operations
- **Error Tracking**: Automatic error logging with context
- **Performance Metrics**: Request duration and database operation timing
- **Observe Integration**: Ready for Observe.inc cloud platform

### 🚀 **Development Workflow**
1. **Package Installation**: Use `PIP_CONFIG_FILE=pip.conf pip3 install <package>`
2. **Configuration Loading**: App checks local config first, falls back to Nexus
3. **Database**: Automatic SQLite table creation on first run
4. **API Testing**: Server runs on `http://localhost:8080`

### 🛠️ **Common Commands**
```bash
# Install packages via Nexus
PIP_CONFIG_FILE=config/pip.conf pip3 install -r requirements.txt

# Automated team setup
python3 scripts/setup_team.py

# Run the application
python3 app.py

# Test API endpoints
curl http://localhost:8080/
curl -X POST http://localhost:8080/api/feedings -H "Content-Type: application/json" -d '{"bird_type":"Robin","food_type":"Seeds","quantity":25}'
curl http://localhost:8080/api/feedings

# Upload config to Nexus
curl -u admin:admin123 -X PUT "http://localhost:8081/repository/test-raw/db_config.json" --data-binary @config/db_config.json -H "Content-Type: application/json"
curl -u admin:admin123 -X PUT "http://localhost:8081/repository/test-raw/observe_config.json" --data-binary @config/observe_config.json -H "Content-Type: application/json"

# Run utility scripts
python3 scripts/demo_observe.py

# View structured logs (in separate terminal while app is running)
tail -f logs/app.log | jq .
```

### ⚠️ **Known Issues & Solutions**
- **Port 5000 Conflict**: macOS AirPlay uses port 5000, app uses 8080 instead
- **urllib3 Import Error**: Dependency issue resolved by reinstalling packages via Nexus
- **Module Not Found**: Ensure all packages installed through Nexus configuration

### 🎓 **Learning Outcomes**
- ✅ **Nexus Proxy Repository**: Successfully caching PyPI packages
- ✅ **Configuration Management**: Storing configs in artifact repository
- ✅ **Fallback Strategies**: Local config → Nexus config → defaults
- ✅ **Enterprise Patterns**: Package management, security scanning concepts
- ✅ **Standard vs Third-party**: Understanding what can/cannot be managed via Nexus

### 🔄 **Future Enhancements**
- [ ] Add authentication to Flask API
- [ ] Implement proper logging
- [ ] Add data validation
- [ ] Create Docker containerization
- [ ] Add CI/CD pipeline integration
- [ ] Implement proper error handling

### 🤝 **Team Onboarding**
New team members should:
1. Read this memory file first
2. Ensure Nexus is running on `localhost:8081`
3. Configure pip with: `PIP_CONFIG_FILE=pip.conf`
4. Install dependencies: `pip3 install -r requirements.txt`
5. Run application: `python3 app.py`
6. Test endpoints using the commands above

### 📚 **References & Documentation**
- Nexus Repository Manager Documentation
- Flask API Documentation
- Python Package Management Best Practices
- Enterprise Security Patterns

---
*Last Updated: 2025-09-22*
*Project Status: Educational/Hobby - Fully Functional*
