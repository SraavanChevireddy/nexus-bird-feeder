# ğŸ¦ Bird Feeding Project Memory

## ğŸ“ Project Context & Knowledge Base

### ğŸ¯ **Project Purpose**
- **Hobby project** to learn Nexus Repository management
- **Flask API** for tracking bird feeding activities
- **Educational focus** on enterprise PyPI package management patterns

### ğŸ—ï¸ **Architecture Overview**
```
ğŸ¦ Bird Feeding Application
â”œâ”€â”€ ğŸ“¦ Package Management â†’ Nexus Repository (bird-feeder proxy)
â”œâ”€â”€ âš™ï¸ Configuration â†’ Nexus Raw Repository (test-raw)
â”œâ”€â”€ ğŸ—„ï¸ Database â†’ Local SQLite (bird_feedings.db)
â””â”€â”€ ğŸŒ API â†’ Flask REST endpoints
```

### ğŸ”§ **Nexus Repository Setup**
- **Nexus URL**: `http://localhost:8081`
- **Credentials**: `admin:admin123`
- **PyPI Repository**: `bird-feeder` (proxy type)
- **Config Repository**: `test-raw` (raw/hosted type)

### ğŸ“¦ **Package Management**
- **Primary Source**: Nexus proxy repository
- **Fallback**: PyPI.org (configured in pip.conf)
- **Cached Packages**: flask, requests, urllib3, certifi, charset-normalizer, idna

### ğŸ—‚ï¸ **Project Structure**
```
bird-feeding/
â”œâ”€â”€ app.py                          # Main Flask API application
â”œâ”€â”€ observe_logger.py               # Custom Observe.inc integration
â”œâ”€â”€ requirements.txt                # Python dependencies
â”œâ”€â”€ pyproject.toml                  # Modern Python project metadata
â”œâ”€â”€ bird_feedings.db               # SQLite database (auto-created)
â”œâ”€â”€ config/                        # Configuration files
â”‚   â”œâ”€â”€ pip.conf                   # Nexus repository configuration
â”‚   â”œâ”€â”€ db_config.json             # Database configuration
â”‚   â””â”€â”€ observe_config.json        # Observability settings
â”œâ”€â”€ docs/                          # Documentation
â”‚   â”œâ”€â”€ README.md                  # Detailed project documentation  
â”‚   â”œâ”€â”€ TEAM_SETUP.md             # Team onboarding guide
â”‚   â””â”€â”€ .project-memory.md        # This knowledge base
â”œâ”€â”€ scripts/                       # Utility scripts
â”‚   â”œâ”€â”€ demo_observe.py           # Observe logging demo
â”‚   â””â”€â”€ setup_team.py             # Team setup automation
â””â”€â”€ logs/                          # Application logs (runtime)
```

### ğŸŒ **API Endpoints**
- `GET /` - API information and documentation
- `POST /api/feedings` - Add new bird feeding record
- `GET /api/feedings` - Retrieve all feeding records
- `GET /api/stats` - Get feeding statistics

### ğŸ“Š **Database Schema**
```sql
CREATE TABLE bird_feedings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    bird_type TEXT NOT NULL,
    food_type TEXT NOT NULL,
    quantity INTEGER NOT NULL,
    location TEXT,
    feeding_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    notes TEXT
);
```

### ğŸ” **Security & Compliance Context**
- **Standard Library vs Third-Party**: Only third-party packages (flask, requests, structlog) flow through Nexus
- **Vulnerability Scanning**: Nexus Firewall/Lifecycle can only scan packages in the repository
- **Configuration Management**: Database config stored both locally and in Nexus for team consistency
- **Observability**: Structured logging with Observe.inc integration for monitoring and debugging

### ğŸ” **Observability & Monitoring**
- **Structured Logging**: JSON-formatted logs with request tracking
- **Request Tracing**: Each request gets unique ID for correlation
- **Business Events**: Custom events for bird feeding operations
- **Error Tracking**: Automatic error logging with context
- **Performance Metrics**: Request duration and database operation timing
- **Observe Integration**: Ready for Observe.inc cloud platform

### ğŸš€ **Development Workflow**
1. **Package Installation**: Use `PIP_CONFIG_FILE=pip.conf pip3 install <package>`
2. **Configuration Loading**: App checks local config first, falls back to Nexus
3. **Database**: Automatic SQLite table creation on first run
4. **API Testing**: Server runs on `http://localhost:8080`

### ğŸ› ï¸ **Common Commands**
```bash
# Install packages via Nexus
PIP_CONFIG_FILE=config/pip.conf pip3 install -r requirements.txt

# Automated team setup
python3 scripts/setup_team.py

# Run the application
python3 app.py

# Test API endpoints
curl http://localhost:8080/
curl -X POST http://localhost:8080/api/feedings -H "Content-Type: application/json" -d '{"bird_type":"Robin","food_type":"Seeds","quantity":25}'
curl http://localhost:8080/api/feedings

# Upload config to Nexus
curl -u admin:admin123 -X PUT "http://localhost:8081/repository/test-raw/db_config.json" --data-binary @config/db_config.json -H "Content-Type: application/json"
curl -u admin:admin123 -X PUT "http://localhost:8081/repository/test-raw/observe_config.json" --data-binary @config/observe_config.json -H "Content-Type: application/json"

# Run utility scripts
python3 scripts/demo_observe.py

# View structured logs (in separate terminal while app is running)
tail -f logs/app.log | jq .
```

### âš ï¸ **Known Issues & Solutions**
- **Port 5000 Conflict**: macOS AirPlay uses port 5000, app uses 8080 instead
- **urllib3 Import Error**: Dependency issue resolved by reinstalling packages via Nexus
- **Module Not Found**: Ensure all packages installed through Nexus configuration

### ğŸ“ **Learning Outcomes**
- âœ… **Nexus Proxy Repository**: Successfully caching PyPI packages
- âœ… **Configuration Management**: Storing configs in artifact repository
- âœ… **Fallback Strategies**: Local config â†’ Nexus config â†’ defaults
- âœ… **Enterprise Patterns**: Package management, security scanning concepts
- âœ… **Standard vs Third-party**: Understanding what can/cannot be managed via Nexus

### ğŸ”„ **Future Enhancements**
- [ ] Add authentication to Flask API
- [ ] Implement proper logging
- [ ] Add data validation
- [ ] Create Docker containerization
- [ ] Add CI/CD pipeline integration
- [ ] Implement proper error handling

### ğŸ¤ **Team Onboarding**
New team members should:
1. Read this memory file first
2. Ensure Nexus is running on `localhost:8081`
3. Configure pip with: `PIP_CONFIG_FILE=pip.conf`
4. Install dependencies: `pip3 install -r requirements.txt`
5. Run application: `python3 app.py`
6. Test endpoints using the commands above

### ğŸ“š **References & Documentation**
- Nexus Repository Manager Documentation
- Flask API Documentation
- Python Package Management Best Practices
- Enterprise Security Patterns

---
*Last Updated: 2025-09-22*
*Project Status: Educational/Hobby - Fully Functional*
